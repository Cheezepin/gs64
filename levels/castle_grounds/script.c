#include <ultra64.h>
#include "sm64.h"
#include "behavior_data.h"
#include "model_ids.h"
#include "seq_ids.h"
#include "dialog_ids.h"
#include "segment_symbols.h"
#include "level_commands.h"

#include "game/level_update.h"

#include "levels/scripts.h"

#include "actors/common1.h"

#include "make_const_nonconst.h"
#include "levels/castle_grounds/header.h"

const LevelScript level_castle_grounds_entry[] = {
	INIT_LEVEL(),
	LOAD_YAY0(0x7, _castle_grounds_segment_7SegmentRomStart, _castle_grounds_segment_7SegmentRomEnd), 
	LOAD_YAY0(0xa, _water_skybox_yay0SegmentRomStart, _water_skybox_yay0SegmentRomEnd), 
	LOAD_YAY0_TEXTURE(0x09, _grass_yay0SegmentRomStart, _grass_yay0SegmentRomEnd), 
	LOAD_YAY0(0x05, _group1_yay0SegmentRomStart, _group1_yay0SegmentRomEnd), 
	LOAD_RAW(0x0C, _group1_geoSegmentRomStart, _group1_geoSegmentRomEnd), 
	LOAD_YAY0(0x06, _group14_yay0SegmentRomStart, _group14_yay0SegmentRomEnd), 
	LOAD_RAW(0x0D, _group14_geoSegmentRomStart, _group14_geoSegmentRomEnd), 
	LOAD_YAY0(0x08, _common0_yay0SegmentRomStart, _common0_yay0SegmentRomEnd), 
	LOAD_RAW(0x0F, _common0_geoSegmentRomStart, _common0_geoSegmentRomEnd), 
	ALLOC_LEVEL_POOL(),
	MARIO(MODEL_MARIO, 0x00000001, bhvMario), 
	JUMP_LINK(script_func_global_1), 
	JUMP_LINK(script_func_global_2), 
	JUMP_LINK(script_func_global_15), 
	LOAD_MODEL_FROM_GEO(MODEL_BOB_BUBBLY_TREE, bubbly_tree_geo), 
	LOAD_MODEL_FROM_GEO(MODEL_CASTLE_CASTLE_DOOR, castle_door_geo), 

	AREA(1, castle_grounds_area_1),
		WARP_NODE(0x01, LEVEL_BOB, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0x02, LEVEL_BOB, 0x03, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0x0A, LEVEL_CASTLE_GROUNDS, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0x0B, LEVEL_CASTLE_GROUNDS, 0x01, 0x0B, WARP_NO_CHECKPOINT),
		WARP_NODE(240, LEVEL_CASTLE_GROUNDS, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(241, LEVEL_CASTLE_GROUNDS, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		OBJECT(MODEL_CHEST, 6940, -114, 7572, 0, 0, 0, 0x00000000, bhvChest),
		OBJECT(MODEL_CHEST, 6778, 0, -4629, 0, 155, 0, 0x01050000, bhvChest),
		OBJECT(MODEL_CHEST, 7907, 2250, -3279, 0, -66, 0, 0x02000000, bhvChest),
		OBJECT(MODEL_CHEST, -6170, 4500, -5292, 0, 70, 0, 0x03010000, bhvChest),
		OBJECT(MODEL_CHEST, -2075, 7000, -5928, 0, -180, 0, 0x04000000, bhvChest),
		OBJECT(MODEL_CASTLE_CASTLE_DOOR, -2142, 7250, -2972, 0, 0, 0, 0x00020000, bhvDoorWarp),
		OBJECT(MODEL_CASTLE_CASTLE_DOOR, -1987, 7250, -2972, 0, -180, 0, 0x00010000, bhvDoorWarp),
		OBJECT(MODEL_HEART, 0, 125, 5500, 0, 0, 0, 0x00000000, bhvRecoveryHeart),
		OBJECT(MODEL_BOBOMB_BUDDY, 348, 125, 4990, 0, 0, 0, 0x00000000, bhvBobombBuddy),
		OBJECT(MODEL_BOBOMB_BUDDY, -6078, -875, 6435, 0, 0, 0, 0x00080000, bhvBobombBuddy),
		OBJECT(MODEL_LEAF, -1522, 2250, 1726, 0, -90, 0, 0x00000000, bhvLeaf),
		OBJECT(MODEL_LIFTROCK, -6084, -875, 6045, 0, 0, 0, 0x00000005, bhvLiftRock),
		OBJECT(MODEL_VERIO, -6084, -875, 6045, 0, 0, 0, 0x00010000, bhvCharacterPickup),
		OBJECT(MODEL_JURIO, -2507, 2250, -7812, 0, 0, 0, 0x00020000, bhvCharacterPickup),
		OBJECT(MODEL_MERIO, 3913, 3750, -1798, 0, 0, 0, 0x00030000, bhvCharacterPickup),
		OBJECT(MODEL_PLANT, 2702, 625, 2804, 0, 0, 0, 0x00000000, bhvPlant),
		OBJECT(MODEL_PLANT, -1524, 2813, 969, 0, 0, 0, 0x00000000, bhvPlant),
		OBJECT(MODEL_PUDDLE, 1448, 4500, -764, 0, 0, 0, 0x00000000, bhvPuddle),
		MARIO_POS(0x01, 0, 0, 0, 5000),
		OBJECT(MODEL_NONE, 0, 0, 5000, 0, 0, 0, 0x000A0000, bhvSpinAirborneWarp),
		OBJECT(MODEL_NONE, -2080, 7250, -2709, 0, 0, 0, 0x000B0000, bhvSpinAirborneWarp),
		OBJECT(MODEL_BOB_BUBBLY_TREE, 4878, -101, 7521, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, 5892, 0, -6167, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, 4172, 0, -6178, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, 282, 0, -8561, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, 2530, 0, -7664, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, -1810, 0, -8757, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, -4117, 0, -8413, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, -6274, 0, -7762, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, -7376, 0, -6576, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, -8450, 0, -5305, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, -8023, 0, -1367, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, -7383, 0, 598, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, -7140, 0, 2315, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, -7932, 0, 3070, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, -8837, 0, 4529, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, -9238, 0, 5965, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, -9215, 0, 7538, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, -8114, 0, 8279, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, -6777, 0, 8731, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, -5335, 0, 8551, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, -3149, 0, 7624, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, -633, 84, 6253, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, -1929, 122, 6398, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, -1509, -67, 4302, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, -2614, 78, 4222, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, 425, 94, 7895, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, 1959, 0, 5963, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, 3179, 44, 9125, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, 3760, 103, 4274, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, 5452, 83, 4828, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, 3529, 0, 6961, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, -8641, 0, -3579, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, -7601, 2250, -3628, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, -7173, 2250, -2214, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, -6719, 2250, -803, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, -6499, 2250, 784, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, -5533, 2250, 1722, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, -4348, 2250, 2262, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, -2924, 2250, 2383, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, -1266, 2250, 2521, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, 728, 2250, 2174, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, 3161, 2250, 1968, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, 5039, 2250, 922, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, 6106, 2250, -549, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, 6986, 2250, -1984, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, 6173, 2250, -3495, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, 3825, 2250, -5328, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, 1325, 2250, -6793, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, -254, 2250, -7630, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, -1816, 2250, -7816, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, -3966, 2250, -7619, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, -5514, 2250, -7013, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, -7051, 2250, -5781, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, -5454, 4500, -5847, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, -3717, 4500, -6901, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, -1792, 4500, -7154, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, -134, 4500, -6890, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, 1522, 4500, -6017, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, 2375, 4500, -5315, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, 3264, 4500, -4342, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, 4289, 4500, -3808, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, 5577, 4500, -2828, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, 5646, 4500, -1383, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, 5172, 4500, -297, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, 4284, 4500, 261, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, 3058, 4500, 493, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, 1576, 4500, 508, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, 2605, 4500, 951, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, 260, 4500, 608, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, -587, 4500, 350, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, -497, 4500, 1089, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, -2288, 4500, 1398, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, -2925, 4500, 864, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, -4050, 4500, 359, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, -5032, 4500, 352, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, -5527, 4500, -664, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, -6262, 4500, -1005, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, -6290, 4500, -2164, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, -6389, 4500, -3725, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, -6033, 4500, -4541, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, -2278, 6750, -213, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, -580, 6750, -1419, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, 587, 6750, -1163, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, -1408, 6750, -848, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, -2769, 6750, -923, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, -3805, 6750, -479, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, -3902, 6750, -1783, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, -4604, 6750, -1307, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, -4760, 6750, -2526, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, -5644, 6750, -2658, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, -4755, 6750, -3265, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, -5373, 6750, -3943, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, -4698, 6750, -4623, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, -4607, 6750, -5442, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, -3682, 6750, -6000, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, -2562, 6750, -6714, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, -1781, 6750, -6500, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, -728, 6750, -6148, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, 244, 6750, -6194, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, 237, 6750, -5519, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, 1498, 6750, -4853, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, 1097, 6750, -4187, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, 1685, 6750, -3606, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, 1464, 6750, -2297, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, 953, 6750, -3023, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, 353, 6750, -2231, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, -4130, 0, 3722, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, -5195, 0, 3190, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, -6243, 0, 3326, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, -880, -11000, -478, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, 2500, -10750, 2125, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, 1584, -11000, -849, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, 1587, -11000, 425, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, -163, -11000, 1105, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, -1250, -10848, 1500, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_BOB_BUBBLY_TREE, -625, -10843, -1625, 0, 155, 0, 0x01050000, bhvTree),
		OBJECT(MODEL_NONE, 0, 0, -2500, 0, 0, 0, 0x30010000, bhvWarp),
		TERRAIN(castle_grounds_area_1_collision),
		MACRO_OBJECTS(castle_grounds_area_1_macro_objs),
		SET_BACKGROUND_MUSIC(0x00, SEQ_OVERWORLD),
		TERRAIN_TYPE(TERRAIN_GRASS),
	END_AREA(),

	FREE_LEVEL_POOL(),
	MARIO_POS(0x01, 0, 0, 0, 5000),
	CALL(0, lvl_init_or_update),
	CALL_LOOP(1, lvl_init_or_update),
	CLEAR_LEVEL(),
	SLEEP_BEFORE_EXIT(1),
	EXIT(),
};
